<p id="notice"><%= notice %></p>

<h1>Players</h1>

<%= link_to 'New Player', new_player_path %> |
<%= link_to 'Teams', teams_path %> |
<%= link_to 'PlayerRoles', playerroles_path %> |
<%= link_to 'Roles', roles_path %> |
<%= link_to 'Back', :back %>

<br><br>

<table>
  <thead>
    <tr>
      <th>NÂ°</th>
      <th>ID</th>
      <th>Nome</th>
      <th>Nickname</th>
      <th>Sobrenome</th>
      <th>Idade</th>
      <th>Roles</th>
      <th>Elo</th>
      <th>Team</th>
      <th colspan="3">Comandos</th>
    </tr>
  </thead>

  <tbody>
    <% j=0 %>
    <% @players.each do |player| %>
      <% j=j+1 %>
      <tr>
        <td><%= j %></td>
        <td><%= player.id %></td>
        <td><strong><%= player.nome %></strong></td>
        <td><strong><%= player.nickname %></strong></td>
        <td><%= player.sobrenome %></td>
        <td><%= player.idade %></td>
        
        <td>
          
          <% i = 0 %>
          
          <% @playerroles.each do |playerrole| %>
          
            <% if playerrole.player_id == player.id %>
            
              <% if i > 0 %> / <% end %>
              
              <%= playerrole.role.role %>
              
              <% i=i+1 %>
            
            <% end %>
            
          <% end %>
          
        </td>
        
        <td><%= player.elo %> <%= player.divisao %></td>
        <td><%= link_to player.team.nome, player.team %></td>
        <td><%= link_to 'Show', player %></td>
        <td><%= link_to 'Edit', edit_player_path(player) %></td>
        <td><%= link_to 'Destroy', player, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>
